<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>styleit - Development</title>
</head>

<body>
  <div id="root">
    <div id="editor" contenteditable="true">
      <h1>TextEditor-API concepts</h1>
      <p>
        StyleIt.js is a simple text editor API built for Developers. <br /> It
        outputs clean data in JSON instead of heavy HTML-markup for efficent data
        saving. <br /> More important StyleIt.js knows how to use ANY Css rule.
      </p>

      <ul>
        <li>Clean data output</li>
        <li>Use of any CSS rules</li>
        <li>Style with classes</li>
      </ul>
      <h3>Node module</h3>
      <ul>
        <li>
          <p> npm i styleit-api --save </p>
        </li>
        <li>
          <p>Include the module in your application</p>
        </li>
      </ul>
      <div>
        <br />
        <br />
      </div>


      <table style="width:100%">
        <tr>
          <th>Mode</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>Toggle</td>
          <td>String</td>
          <td>
            Style elements with on/off functionality => like
            bold,underline,italic
          </td>
        </tr>
        <tr>
          <td>Extend</td>
          <td>String</td>
          <td>
            Only extends the currect style => font-size, color, backgorund
          </td>
        </tr>
      </table>
    </div>
  </div>
  <style>
    .test {
      letter-spacing: 0.2em;
      -webkit-text-fill-color: transparent;
      -webkit-text-stroke-width: 1px;
      -webkit-text-stroke-color: #b50064;
      text-shadow: 3px 2px 20px #0a0a0a, 1px 3px 6px #ff0c0c;
    }
  </style>
  </div>
  <script>

    (function () {

      const init = () => {
        window.addEventListener('DOMContentLoaded', (event) => {
          const root = document.querySelector('#root');

          document.body.appendChild(root);
          //================================================================
          const config = {
            onInspect: (styles) => {
              inspect.innerHTML = `<code>${JSON.stringify(styles)}</code>`
            },  
             //TODO:Rules
            rules: {
              filter:[{el:"DIV",replaceWith:"P"}]
            }
          }
          const styleIt = new styleit('editor', config);
          //================================================================
          const btns = [
            { text: "toggle class", onclick: () => styleIt.ToggleClass("test") },
            {
              text: "B:Block", onclick: () => styleIt.ExecCmd("font-weight", "bold", styleIt.Modes.Toggle, {
                target: "block",
                selection: false
              })
            },
            { text: "B", onclick: () => styleIt.ExecCmd("font-weight", "bold", styleIt.Modes.Toggle) },

            { text: "U", onclick: () => styleIt.ExecCmd("text-decoration", "underline", styleIt.Modes.Toggle,{
              selection:false
            }) },
            { text: "50px", onclick: () => styleIt.ExecCmd("font-size", "50px", styleIt.Modes.Extend) },
            { text: "30px", onclick: () => styleIt.ExecCmd("font-size", "30px", styleIt.Modes.Extend) },
            {
              text: "30px:Block", onclick: () => styleIt.ExecCmd("font-size", "30px", styleIt.Modes.Extend, {
                target: "block",
                selection: false
              })
            },
            { text: "Red", onclick: () => styleIt.ExecCmd("color", "red", styleIt.Modes.Extend) },
            { text: "yellow", onclick: () => styleIt.ExecCmd("color", "yellow", styleIt.Modes.Extend) },
            { text: "blue", onclick: () => styleIt.ExecCmd("color", "blue", styleIt.Modes.Extend) },
            { text: "green", onclick: () => styleIt.ExecCmd("color", "green", styleIt.Modes.Extend) },
            { text: "left", onclick: () => styleIt.ExecCmd("text-align", "left", styleIt.Modes.Extend, { target: 'block', selection: false }) },
            { text: "center", onclick: () => styleIt.ExecCmd("text-align", "center", styleIt.Modes.Extend, { target: 'block', selection: false }) },
            { text: "right", onclick: () => styleIt.ExecCmd("text-align", "right", styleIt.Modes.Extend, { target: 'block', selection: false }) },
          ]
          btns.forEach(btn => {
            const _btn = root.addElement('button');
            _btn.onclick = btn.onclick;
            _btn.innerHTML = btn.text;
          });
          const slider = root.addElement('input');
          slider.type = "range";
          slider.step = "1";
          slider.value = 0;
          slider.oninput = (e) => {
            console.log(e.target.value)
            styleIt.ExecCmd("font-size", `${e.target.value}px`, styleIt.Modes.Extend)
          }
          root.addElement('div');
          const key = root.addElement('input');
          const value = root.addElement('input');

          const ok = root.addElement('button');
          ok.innerHTML = "go"
          ok.onclick = () => {
            styleIt.ExecCmd(key.value, value.value, styleIt.Modes.Extend);
          }

          const inspect = root.addElement('div');
          const save = root.addElement('button');
          save.innerHTML = "Save"
          let savedData;
          save.onclick = () => {
            savedData = styleIt.Save();
            inspect.innerHTML = JSON.stringify(savedData);
          }

          const load = root.addElement('button');
          load.innerHTML = "Load"
          load.onclick = () => {
            if (savedData)
              styleIt.Load(savedData);
          }
          const destroy = root.addElement('button');
          destroy.innerHTML = "Destroy";
          destroy.onclick = () => {
            styleIt.Destroy();
          }
        });
      }
      init();
      Element.prototype.addElement = function (type) {
        const element = document.createElement(type);
        this.appendChild(element);
        return element;
      }

    })();
  </script>
</body>

</html>